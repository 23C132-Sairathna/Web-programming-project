<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dropdown Country, State, City and Timer</title>
  <style>
    #startButton {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #timerDisplay {
      font-size: 24px;
      margin-top: 20px;
    }
  </style>
  <script>
   
    const data = {
      "USA": {
        "California": ["Los Angeles", "San Francisco", "San Diego"],
        "Texas": ["Houston", "Dallas", "Austin"]
      },
      "India": {
        "Maharashtra": ["Mumbai", "Pune", "Nagpur"],
        "Karnataka": ["Bangalore", "Mysore", "Mangalore"]
      }
    };

    
    function Timer() {
      this.seconds = 0;
      this.timerInterval = null;
      this.running = false;

      
      this.start = function() {
        if (!this.running) {
          this.running = true;
          this.timerInterval = setInterval(() => {
            this.seconds++;
            updateTimerDisplay(this.seconds); 
          }, 1000);
        }
      };

     
      this.stop = function() {
        if (this.running) {
          clearInterval(this.timerInterval);
          this.running = false;
        }
      };


      this.reset = function() {
        this.stop();
        this.seconds = 0;
        updateTimerDisplay(this.seconds); 
      };
    }

    function updateTimerDisplay(seconds) {
      document.getElementById("timerDisplay").textContent = `Timer: ${seconds} seconds`;
    }

    let timer = new Timer();

    function storeSessionData() {
      const userData = document.getElementById("username").value; 
      sessionStorage.setItem("user", userData); 
      document.getElementById("sessionInfo").innerText = "Session User: " + sessionStorage.getItem("user");
      alert("Session data stored: " + sessionStorage.getItem("user"));
    }

    function onKeyDownHandler(event) {
      console.log(`Key pressed: ${event.key}`);
      document.getElementById("keyStatus").innerText = `Key pressed: ${event.key}`;
    }

    function onKeyUpHandler(event) {
      console.log(`Key released: ${event.key}`);
      document.getElementById("keyStatus").innerText = `Key released: ${event.key}`;
    }

    function onMouseOverHandler() {
      console.log("Mouse hovered over the input field.");
      document.getElementById("mouseStatus").innerText = "Mouse hovered over the input field.";
    }

    function onMouseOutHandler() {
      console.log("Mouse left the input field.");
      document.getElementById("mouseStatus").innerText = "Mouse left the input field.";
    }

    function handleButtonClick() {
      const button = document.getElementById("startButton");

      button.style.backgroundColor = "#ff5733"; 


      if (!timer.running) {
        timer.start();
      } else {
        timer.stop();
        button.style.backgroundColor = "#4CAF50"; 
      }
    }

    function updateStates() {
      const countrySelect = document.getElementById("country");
      const stateSelect = document.getElementById("state");
      const selectedCountry = countrySelect.value;

      stateSelect.innerHTML = "<option value='' disabled selected>Select State</option>";

      if (selectedCountry && data[selectedCountry]) {
        for (const state of Object.keys(data[selectedCountry])) {
          const option = document.createElement("option");
          option.value = state;
          option.textContent = state;
          stateSelect.appendChild(option);
        }
      }
      updateCities(); 
    }

    function updateCities() {
      const countrySelect = document.getElementById("country");
      const stateSelect = document.getElementById("state");
      const citySelect = document.getElementById("city");

      const selectedCountry = countrySelect.value;
      const selectedState = stateSelect.value;

      citySelect.innerHTML = "<option value='' disabled selected>Select City</option>";

      if (selectedCountry && selectedState && data[selectedCountry] && data[selectedCountry][selectedState]) {
        for (const city of data[selectedCountry][selectedState]) {
          const option = document.createElement("option");
          option.value = city;
          option.textContent = city;
          citySelect.appendChild(option);
        }
      }
    }

    function refreshPage() {
      location.reload();  
    }


    window.addEventListener('click', function(event) {
      console.log('Captured click event:', event);
    }, true); 

    document.addEventListener("DOMContentLoaded", function () {

      document.getElementById("country").addEventListener("change", updateStates);
      document.getElementById("state").addEventListener("change", updateCities);

      
      const inputField = document.getElementById("inputField");
      inputField.addEventListener("keydown", onKeyDownHandler);
      inputField.addEventListener("keyup", onKeyUpHandler);
      inputField.addEventListener("mouseover", onMouseOverHandler);
      inputField.addEventListener("mouseout", onMouseOutHandler);


      document.getElementById("startButton").addEventListener("click", handleButtonClick);

   
      document.getElementById("storeSessionButton").addEventListener("click", storeSessionData);

      
      document.getElementById("refreshButton").addEventListener("click", refreshPage);
    });
  </script>
</head>
<body>

<h1>Select Country, State, and City</h1>

<form>
  
  <label for="country">Country: </label>
  <select id="country" name="country" required>
    <option value="" disabled selected>Select Country</option>
    <option value="USA">USA</option>
    <option value="India">India</option>
  </select>
  <br><br>

 
  <label for="state">State: </label>
  <select id="state" name="state" required>
    <option value="" disabled selected>Select State</option>
  </select>
  <br><br>


  <label for="city">City: </label>
  <select id="city" name="city" required>
    <option value="" disabled selected>Select City</option>
  </select>
  <br><br>


  <label for="inputField">Enter Something: </label>
  <input type="text" id="inputField" readonly>
  <br><br>


  <label for="username">Enter Username: </label>
  <input type="text" id="username" placeholder="Enter your username" required>
  <br><br>


  <button type="button" id="storeSessionButton">Store Session Data</button>
  <br><br>


  <button type="button" id="refreshButton">Refresh Page</button>
  <br><br>


  <button type="button" id="startButton">Start Timer</button>
  <br><br>


  <p id="timerDisplay">Timer: 0 seconds</p>
</form>


<p id="sessionInfo">Session User: </p>

<p id="keyStatus">Key events will be displayed here.</p>


<p id="mouseStatus">Mouse events will be displayed here.</p>

<script>
  
  if (sessionStorage.getItem("user")) {
    document.getElementById("sessionInfo").innerText = "Session User: " + sessionStorage.getItem("user");
  }
</script>

</body>
</html>
